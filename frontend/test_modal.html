<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modal Test - Room Booking</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        body {
            padding: 50px;
            background: #f5f5f5;
            font-family: Arial, sans-serif;
        }
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #07203f;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            width: 100%;
        }
        .test-button:hover {
            background: #1e40af;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Modal Test Page</h1>
        <p>This page tests the booking modals without needing to fill out the entire form.</p>
        
        <button class="test-button" onclick="testConfirmationModal()">
            üìÖ Test Confirmation Modal
        </button>
        
        <button class="test-button" onclick="testSuccessModal()">
            ‚úÖ Test Success Modal
        </button>
        
        <button class="test-button" onclick="testErrorModal()">
            ‚ùå Test Error Modal
        </button>
        
        <hr style="margin: 30px 0;">
        
        <h2>üìù Sample Booking Form</h2>
        <p>Fill out basic info and click "Test Booking Flow" to see the complete modal sequence:</p>
        
        <div style="margin: 20px 0;">
            <input type="text" id="testName" placeholder="Your Name" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;" value="John Doe">
            <input type="email" id="testEmail" placeholder="Your Email" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;" value="john@example.com">
            <input type="date" id="testDate" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;">
            <input type="time" id="testStartTime" style="width: 48%; padding: 10px; margin: 5px 1%; border: 1px solid #ddd; border-radius: 5px;" value="09:00">
            <input type="time" id="testEndTime" style="width: 48%; padding: 10px; margin: 5px 1%; border: 1px solid #ddd; border-radius: 5px;" value="10:00">
            <input type="text" id="testRoom" placeholder="Room Number" style="width: 48%; padding: 10px; margin: 5px 1%; border: 1px solid #ddd; border-radius: 5px;" value="T401">
            <input type="text" id="testBuilding" placeholder="Building" style="width: 48%; padding: 10px; margin: 5px 1%; border: 1px solid #ddd; border-radius: 5px;" value="STEM">
            <textarea id="testPurpose" placeholder="Purpose" style="width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 5px;" rows="3">Team meeting</textarea>
        </div>
        
        <button class="test-button" onclick="testBookingFlow()">
            üöÄ Test Complete Booking Flow
        </button>
    </div>

    <!-- Include the modals from book_room.html -->
    <!-- Booking Confirmation Modal -->
    <div id="bookingConfirmationModal" class="modal">
        <div class="modal-content confirmation-modal">
            <div class="modal-header">
                <div class="confirmation-icon">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <h3>Confirm Your Booking</h3>
                <p class="modal-subtitle">Please review your booking details below</p>
            </div>
            <div class="modal-body">
                <div class="booking-summary-card">
                    <div class="booking-info-section">
                        <h4><i class="fas fa-user"></i> Personal Information</h4>
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label">Name</span>
                                <span id="confirmName" class="info-value"></span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Email</span>
                                <span id="confirmEmail" class="info-value"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="booking-info-section">
                        <h4><i class="fas fa-clock"></i> Schedule</h4>
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label">Date</span>
                                <span id="confirmDate" class="info-value highlight-date"></span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Time</span>
                                <span id="confirmTime" class="info-value highlight-time"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="booking-info-section">
                        <h4><i class="fas fa-building"></i> Location</h4>
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label">Building</span>
                                <span id="confirmBuilding" class="info-value"></span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Room</span>
                                <span id="confirmRoom" class="info-value highlight-room"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="booking-info-section">
                        <h4><i class="fas fa-comment-alt"></i> Purpose</h4>
                        <div class="purpose-text">
                            <span id="confirmPurpose" class="purpose-value"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-cancel" onclick="closeConfirmationModal()">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button type="button" class="btn btn-confirm" onclick="confirmBooking()">
                    <i class="fas fa-check"></i> Confirm Booking
                </button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal">
        <div class="modal-content success-modal">
            <div class="modal-header">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h3>Booking Confirmed!</h3>
                <p class="modal-subtitle">Your reservation has been successfully created</p>
            </div>
            <div class="modal-body">
                <div class="success-message">
                    <p>üéâ Great! Your room booking has been confirmed.</p>
                    <p>You will receive a confirmation email shortly with all the details.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeSuccessModal()">
                    <i class="fas fa-plus"></i> Book Another Room
                </button>
                <button type="button" class="btn btn-primary" onclick="viewBookingHistory()">
                    <i class="fas fa-list"></i> View My Bookings
                </button>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="modal">
        <div class="modal-content error-modal">
            <div class="modal-header">
                <div class="error-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3>Booking Failed</h3>
                <p class="modal-subtitle">We encountered an issue processing your request</p>
            </div>
            <div class="modal-body">
                <div class="error-message-container">
                    <p id="errorMessage">An error occurred while booking the room.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="closeErrorModal()">
                    <i class="fas fa-redo"></i> Try Again
                </button>
            </div>
        </div>
    </div>

    <script>
        // Set default date to tomorrow
        document.getElementById('testDate').value = new Date(Date.now() + 86400000).toISOString().split('T')[0];

        // Test individual modals
        function testConfirmationModal() {
            showConfirmationModal({
                firstName: "John",
                surname: "Doe", 
                email: "john@example.com",
                booking_date: "2025-07-10",
                start_time: "09:00",
                end_time: "10:00",
                building_name: "STEM Building",
                room_number: "T401",
                purpose: "Team meeting"
            });
        }

        function testSuccessModal() {
            showSuccessModal();
        }

        function testErrorModal() {
            showErrorModal("This is a test error message to see how the error modal looks.");
        }

        function testBookingFlow() {
            const name = document.getElementById('testName').value.split(' ');
            const bookingData = {
                firstName: name[0] || "John",
                surname: name.slice(1).join(' ') || "Doe",
                email: document.getElementById('testEmail').value,
                booking_date: document.getElementById('testDate').value,
                start_time: document.getElementById('testStartTime').value,
                end_time: document.getElementById('testEndTime').value,
                building_name: document.getElementById('testBuilding').value,
                room_number: document.getElementById('testRoom').value,
                purpose: document.getElementById('testPurpose').value
            };
            
            showConfirmationModal(bookingData);
        }

        // Modal functions (same as in book_room.js)
        function showConfirmationModal(bookingData) {
            document.getElementById('confirmName').textContent = `${bookingData.firstName} ${bookingData.surname}`;
            document.getElementById('confirmEmail').textContent = bookingData.email;
            document.getElementById('confirmDate').textContent = bookingData.booking_date;
            document.getElementById('confirmTime').textContent = `${bookingData.start_time} - ${bookingData.end_time}`;
            document.getElementById('confirmBuilding').textContent = bookingData.building_name;
            document.getElementById('confirmRoom').textContent = bookingData.room_number;
            document.getElementById('confirmPurpose').textContent = bookingData.purpose;

            const modal = document.getElementById('bookingConfirmationModal');
            modal.classList.add('show');
            document.body.classList.add('modal-open');
        }

        function closeConfirmationModal() {
            const modal = document.getElementById('bookingConfirmationModal');
            modal.classList.remove('show');
            document.body.classList.remove('modal-open');
        }

        function confirmBooking() {
            closeConfirmationModal();
            // Simulate success after a short delay
            setTimeout(() => {
                showSuccessModal();
            }, 500);
        }

        function showSuccessModal() {
            const modal = document.getElementById('successModal');
            modal.classList.add('show');
            document.body.classList.add('modal-open');
        }

        function closeSuccessModal() {
            const modal = document.getElementById('successModal');
            modal.classList.remove('show');
            document.body.classList.remove('modal-open');
        }

        function viewBookingHistory() {
            alert("Would navigate to booking history page");
        }

        function showErrorModal(message) {
            document.getElementById('errorMessage').textContent = message;
            const modal = document.getElementById('errorModal');
            modal.classList.add('show');
            document.body.classList.add('modal-open');
        }

        function closeErrorModal() {
            const modal = document.getElementById('errorModal');
            modal.classList.remove('show');
            document.body.classList.remove('modal-open');
        }

        // Close modals when clicking outside
        window.addEventListener('click', function(event) {
            const modals = ['bookingConfirmationModal', 'successModal', 'errorModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (event.target === modal) {
                    modal.classList.remove('show');
                    document.body.classList.remove('modal-open');
                }
            });
        });
    </script>
</body>
</html>
